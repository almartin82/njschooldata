% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/percentile_rank.R
\name{calculate_access_rate}
\alias{calculate_access_rate}
\title{Calculate equity access rate}
\usage{
calculate_access_rate(
  df_enrollment,
  df_performance,
  performance_metric = "proficient_above",
  threshold_type = c("state_avg", "absolute", "percentile"),
  threshold_value = NULL,
  enrollment_col = "n_students",
  subgroup = NULL,
  join_cols = c("end_year", "county_id", "district_id", "school_id")
)
}
\arguments{
\item{df_enrollment}{School-level enrollment data with demographic counts}

\item{df_performance}{School-level performance data}

\item{performance_metric}{Character. Column in df_performance to use as
the performance measure. Default "proficient_above".}

\item{threshold_type}{Character. How to define "high-performing":
\itemize{
  \item "state_avg": Above the state average for that year/grade/subject
  \item "absolute": Above a fixed numeric threshold
  \item "percentile": Above a percentile threshold within peers
}}

\item{threshold_value}{Numeric. The threshold value. Required for "absolute"
and "percentile" types. For "state_avg", this is ignored.}

\item{enrollment_col}{Character. Column in df_enrollment containing student
counts. Default "n_students".}

\item{subgroup}{Character. Which subgroup to calculate access for. If NULL,
calculates for total enrollment. Default NULL.}

\item{join_cols}{Character vector. Columns to join enrollment and performance
data on. Default c("end_year", "county_id", "district_id", "school_id").}
}
\value{
Dataframe with columns:
  \itemize{
    \item Year and entity identifiers
    \item \code{n_students_total}: Total students in subgroup
    \item \code{n_students_above}: Students in above-threshold schools
    \item \code{pct_access}: Percent with access to high-performing schools
  }
}
\description{
Calculates the share of students (overall or by subgroup)
attending schools that meet or exceed a performance threshold. This
replicates the MarGrady metric: "the share of Black students in Newark
attending a school that beat the state proficiency average."
}
