% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fetch_course_enrollment.R
\name{calc_stem_participation_rate}
\alias{calc_stem_participation_rate}
\title{Calculate STEM Participation Rate}
\usage{
calc_stem_participation_rate(
  math_df,
  science_df,
  cs_df = NULL,
  include_cs = TRUE
)
}
\arguments{
\item{math_df}{A data frame from \code{\link{fetch_math_course_enrollment}}
with math course enrollment data.}

\item{science_df}{A data frame from
\code{\link{fetch_science_course_enrollment}} with science course
enrollment data.}

\item{cs_df}{Optional data frame from \code{\link{fetch_cs_enrollment}}
with computer science enrollment data. Only used if include_cs = TRUE.}

\item{include_cs}{Logical; if TRUE (default), includes computer science
courses in STEM calculation. If FALSE, only includes math and science.}
}
\value{
Data frame with:
  \itemize{
    \item school_id - School identifier
    \item stem_participation_rate - Percentage of students enrolled in STEM courses
    \item category - Participation category: "low" (<30%), "medium" (30-60%),
      or "high" (>60%)
    \item vs_state_avg - Difference from state average (if state data available)
    \item n_stem_students - Total number of students in STEM courses
    \item n_total_students - Total student enrollment
  }
}
\description{
Calculates the percentage of students enrolled in STEM courses
(Science, Technology, Engineering, and Mathematics). Optionally includes
or excludes Computer Science from the calculation.
}
\details{
STEM participation rate is calculated as the percentage of students enrolled
in at least one STEM course. Students may be counted in multiple subject areas
(e.g., a student taking both math and science), so this represents unique
students if the data allows, otherwise represents enrollment counts.

Category thresholds:
\itemize{
  \item Low: < 30% STEM participation
  \item Medium: 30-60% STEM participation
  \item High: > 60% STEM participation
}
}
\examples{
\dontrun{
# Get math and science enrollment
math <- fetch_math_course_enrollment(2024)
science <- fetch_science_course_enrollment(2024)
cs <- fetch_cs_enrollment(2024)

# Calculate STEM participation including CS
stem_with_cs <- calc_stem_participation_rate(math, science, cs, include_cs = TRUE)

# Calculate STEM participation excluding CS
stem_no_cs <- calc_stem_participation_rate(math, science, include_cs = FALSE)

# View schools with highest STEM participation
stem_with_cs \%>\%
  dplyr::arrange(dplyr::desc(stem_participation_rate)) \%>\%
  dplyr::select(school_name, stem_participation_rate, category, vs_state_avg)
}
}
