% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fetch_course_enrollment.R
\name{analyze_course_access_equity}
\alias{analyze_course_access_equity}
\title{Analyze Course Access Equity}
\usage{
analyze_course_access_equity(df_list, subgroup_cols = NULL)
}
\arguments{
\item{df_list}{A named list of data frames from different years. Each element
should be named by its end_year (e.g., list("2022" = df_2022, "2024" = df_2024)).
Data frames should be from course enrollment fetch functions.}

\item{subgroup_cols}{Character vector specifying which subgroup dimensions to
analyze. If NULL (default), attempts to auto-detect subgroup columns.
Common options: "subgroup" for demographic subgroups.}
}
\value{
Data frame with:
  \itemize{
    \item year - Year identifier
    \item location_id - Combined location identifier
    \item subgroup - Demographic subgroup (e.g., "black", "hispanic", "white")
    \item access_rate - Course participation rate for this subgroup
    \item total_population_rate - Rate for total population
    \item access_gap_percentage - Difference from total population (percentage points)
    \item disparity_index - Ratio of subgroup rate to total population rate
      (1.0 = parity, < 1.0 = under-representation, > 1.0 = over-representation)
    \item trend - Trend classification: "improving", "widening", "stable", or "insufficient_data"
    \item flag_large_gap - Logical flag if gap > 20 percentage points
  }
}
\description{
Analyzes equity in course access across demographic subgroups over multiple
years. Calculates access gaps, disparity indices, and trends over time to
identify schools with large inequities in course offerings.
}
\details{
Equity analysis calculates:
\itemize{
  \item Access Rate: Percentage of students in subgroup enrolled in courses
  \item Access Gap: Difference between subgroup rate and total population rate
  \item Disparity Index: Ratio of subgroup rate to total population rate
    (1.0 indicates equal access)
  \item Trend: Direction of change over time based on linear regression
}

Schools with access gaps > 20 percentage points are flagged for attention.
}
\examples{
\dontrun{
# Fetch data for multiple years
math_2022 <- fetch_math_course_enrollment(2022)
math_2023 <- fetch_math_course_enrollment(2023)
math_2024 <- fetch_math_course_enrollment(2024)

# Combine into named list
df_list <- list(
  "2022" = math_2022,
  "2023" = math_2023,
  "2024" = math_2024
)

# Analyze equity across all subgroups
equity <- analyze_course_access_equity(df_list)

# View schools with large access gaps for Hispanic students
equity \%>\%
  dplyr::filter(subgroup == "hispanic", flag_large_gap == TRUE) \%>\%
  dplyr::select(year, school_name, subgroup, access_gap_percentage, disparity_index)
}
}
