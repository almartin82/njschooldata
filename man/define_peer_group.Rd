% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/percentile_rank.R
\name{define_peer_group}
\alias{define_peer_group}
\title{Define a peer comparison group}
\usage{
define_peer_group(
  df,
  peer_type = c("statewide", "dfg", "county", "custom"),
  custom_ids = NULL,
  level = c("district", "school"),
  year_col = "end_year",
  additional_groups = NULL
)
}
\arguments{
\item{df}{Dataframe with entity identifiers}

\item{peer_type}{Character. One of:
\itemize{
  \item "statewide": Compare to all districts/schools in state
  \item "dfg": Compare within District Factor Group
  \item "county": Compare within county
  \item "custom": Compare to custom list of district_ids
}}

\item{custom_ids}{Character vector of district_ids for custom peer groups.
Only used when peer_type = "custom".}

\item{level}{Character. One of "district" or "school" - what level to compare.}

\item{year_col}{Character. Name of the year column. Default "end_year".}

\item{additional_groups}{Character vector. Additional columns to group by
(e.g., "subgroup", "grade", "test_name").}
}
\value{
Grouped dataframe ready for \code{add_percentile_rank()}
}
\description{
Creates grouping on a dataframe that defines which entities
are compared to each other for percentile rank calculations. The returned
df can be piped directly to \code{percentile_rank()}.
}
\examples{
\dontrun{
# DFG peer group for districts
grate \%>\%
  define_peer_group("dfg", level = "district") \%>\%
  add_percentile_rank("grad_rate")

# Custom peer group (DFG A districts)
grate \%>\%
  define_peer_group("custom", custom_ids = dfg_a_districts, level = "district") \%>\%
  add_percentile_rank("grad_rate")
}

}
